# tag-dir-with-version

[![npm version](https://badge.fury.io/js/tag-dir-with-version.svg)](https://badge.fury.io/js/tag-dir-with-version)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

> Glob over a directory and update all placeholder occurrences with a specified replacement string, typically the name and version of your package.

## Installation

```bash
npm install --save-dev tag-dir-with-version
# or
yarn add --dev tag-dir-with-version
```

## Usage

### CLI

```bash
# Using npx
npx tag-dir-with-version ./src --placeholder="__VERSION__" --replacement="my-package@1.0.0" --ignore="node_modules,dist"

# Or if installed globally or in your project
tagDir ./src --placeholder="__VERSION__" --replacement="my-package@1.0.0" --ignore="node_modules,dist"

# In package.json scripts
# "scripts": {
#   "tag-version": "tagDir ./dist --placeholder=\"__VERSION__\""
# }
```

#### CLI Options

| Option | Alias | Description | Default |
|--------|-------|-------------|---------|
| `dir` | - | Directory to search for files | Current working directory |
| `--placeholder` | `-p` | The placeholder string to search for | `__VERSION_HERE__` |
| `--replacement` | `-r` | The string to replace the placeholder with | `${process.env.npm_package_name}@${process.env.npm_package_version}` |
| `--ignore` | `-i` | Comma-separated list of files/patterns to ignore | `''` |
| `--verbose` | - | Display detailed logs | `false` |
| `--help` | `-h` | Show help information | - |

## Use Cases

*   Update version numbers in documentation files during build
*   Inject package version into build files
*   Maintain consistent versioning across multiple files in a project
*   Stamp build artifacts with version information

## Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [fs](#fs)
    *   [Parameters](#parameters)
    *   [Examples](#examples)

### fs

Updates files in a directory by replacing a placeholder with a specified replacement string.

#### Parameters

*   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The options for the function.

    *   `options.dir` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The directory to search for files.
    *   `options.ignorePatterns` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Glob patterns to ignore when searching for files. (optional, default `[]`)
    *   `options.ignorePaths` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Specific file paths to ignore. (optional, default `[]`)
    *   `options.placeholder` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The placeholder string to search for in the files.
    *   `options.replacement` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The string to replace the placeholder with.
    *   `options.verbose` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether to log detailed information about the process. (optional, default `false`)

#### Examples

```javascript
const { tagDirWithVersion } = require('tag-dir-with-version');

tagDirWithVersion({
  dir: './src',
  ignorePatterns: ['.yarn, node_modules'],
  ignorePaths: ['./src/ignore-this-file.js'],
  placeholder: '__VERSION__',
  replacement: '1.0.0',
  verbose: true,
});
```

*   Throws **[Error](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error)** Throws an error if a file cannot be updated.

## License

MIT Â© [David Daniel](http://davidedaniel.github.io)
